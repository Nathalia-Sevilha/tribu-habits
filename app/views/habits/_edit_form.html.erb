<div class="habit-container">
  <%= simple_form_for(@habit) do |form| %>
    <% if habit.errors.any? %>
      <div class="form-errors">
        <h2><%= pluralize(habit.errors.count, "error") %></h2>
        <ul>
          <% habit.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="form-fields">
      <div class="form-group">
        <%= form.input :description,
            label: "Edit your goal:",
            input_html: { class: 'form-control my-3' } %>
      </div>

      <div class="form-group" data-controller="color-picker">
        <label>Edit the color for this habit:</label>
        <%= form.input :color, as: :hidden %>
        <div class="color-choices my-3">
          <% %w[ F09393 F5B6F3 FFC7D0 FFDA9B E4ED97 C1F4DC ACDFEB ].each do |color| %>
            <div
              class="color-choice <%= 'selected' if @habit.color == color %>"
              data-color="<%= color %>"
              style="background: #<%= color %>"
            ></div>
          <% end %>
        </div>
      </div>
    </div>

    <div class="form-group mb-3">
      <p>Edit the days for this habit:</p>
      <div class="d-flex flex-wrap gap-2">
        <%= hidden_field_tag "habit[day_ids][]", nil %>
        <% Day.all.each do |day| %>
        <%= check_box_tag "habit[day_ids][]", day.id, @habit.days.include?(day), id: "day_#{day.id}", class: "d-none" %>
        <label for="day_<%= day.id %>" class="weekday-btn">
          <%= day.name.first(3).upcase %>
        </label>
        <% end %>
      </div>
    </div>

    <div class="form-actions mt-3">
      <%= form.button :submit, "Update Habit", class: "form-submit-btn mt-3 p-3" %>
    </div>
  <% end %>
</div>
